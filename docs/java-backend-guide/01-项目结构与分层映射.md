# 01 项目结构与分层映射

## 总体映射（Python -> Java）
- `backend/app/http_api.py`
  对应 Java 的 `Controller`。
- `backend/app/service.py`
  对应 Java 的 `ApplicationService`/`Facade`。
- `backend/app/models.py`
  对应 Java 的 DTO + 参数校验模型。
- `backend/app/state.py`
  对应贯穿流程的上下文对象（Context）。
- `backend/app/agents/workflow.py`
  对应业务编排器（Pipeline Orchestrator）。
- `backend/app/data/*`
  对应 Repository + Adapter + Data Ingestion Service。
- `backend/app/memory/store.py`
  对应用户长期记忆仓储（SQLite 实现）。
- `backend/app/prompt/registry.py`
  对应 Prompt 配置中心（可类比规则模板中心）。
- `backend/app/middleware/hooks.py`
  对应 Filter/Interceptor/AOP Around。
- `backend/app/observability/tracing.py`
  对应 Trace/Event 采集组件。

## 为什么会感觉“散”
Java 项目往往用注解把职责“粘”在框架上；Python 项目更偏向显式函数调用和组合。
本项目其实仍是经典分层，只是表达方式更轻。

## 入口函数
- HTTP 入口：`create_app()` in `backend/app/http_api.py`
- 本地演示入口：`main()` in `backend/main.py`

## 关键对象
- `AShareAgentService`
  系统统一门面，对外暴露 query/report/ingest/eval。
- `AgentWorkflow`
  单次问答的主流程执行器。
- `AgentState`
  主流程状态载体，流程中不断被读写。

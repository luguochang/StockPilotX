# A2A 协议深度解析与项目接入边界

日期：2026-02-15

## 1. A2A 是什么
- A2A（Agent-to-Agent）是“代理互操作协议层”。
- 核心目标：异构代理可发现、可协商、可流式协作、可异步回调。
- 重点不在“模型能力”，而在“跨代理任务生命周期标准化”。

## 2. A2A 不是什么
- 不是在一个函数里并行调用 3 个 prompt。
- 不是把多个角色写在同一个系统提示词里。
- 不是单项目内部工作流节点编排（那是 Orchestration）。

## 3. 与本项目的分层关系
- 现有编排层：LangGraph（内部任务流）
- 新增协议层：A2A Gateway（外部代理接入）
- 关系：内部照常编排，跨系统协作走 A2A，不互相替代。

## 4. 推荐接入边界
- 适合 A2A 的场景：
  - 外部合规/风控代理
  - 外部行业研究代理
  - 外部数据质量审计代理
- 不适合 A2A 的场景：
  - 本地低延时内部工具调用
  - 单轮轻问答

## 5. 本项目 To-Be 组件
- `a2a-gateway`（新服务）
- `agent-card registry`（能力发现）
- `task dispatcher`（任务创建/订阅/回调）
- `policy guard`（租户、权限、配额）

## 6. 建议状态机（专栏可直接画图）
- `created -> accepted -> in_progress -> requires_input -> completed|failed|cancelled`
- 每次状态变更必须带：
  - `task_id`
  - `agent_id`
  - `timestamp`
  - `trace_ref`

## 7. 接入验收标准
- 能对外发布 agent card。
- 能完成至少 1 个跨代理任务（含流式中间事件）。
- 外部代理失败时，内部链路可回退并保留审计记录。

## 8. 参考
- A2A Specification: https://a2aproject.github.io/A2A/specification/
- A2A Dev Guide: https://a2aproject.github.io/A2A/dev/

